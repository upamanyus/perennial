(* autogenerated from github.com/mit-pdos/vmvcc/examples/strnum *)
From Perennial.goose_lang Require Import prelude.
From Goose Require github_dot_com.tchajed.goose.machine.

Section code.
Context `{ext_ty: ext_types}.
Local Coercion Var' s: expr := Var s.

(* / This package converts between strings and numbers. Currently Goose has
   / limited support for manipulating string, so this package is trusted. *)

Definition StringToU64: val :=
  rec: "StringToU64" "s" :=
    machine.UInt64Get (StringToBytes "s").

Definition U64ToString: val :=
  rec: "U64ToString" "n" :=
    let: "buf" := NewSlice byteT #8 in
    machine.UInt64Put "buf" "n";;
    StringFromBytes "buf".

End code.
